{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-weather",
  "type": "registry:hook",
  "files": [
    {
      "path": "registry/default/hooks/use-weather.ts",
      "content": "import { useState, useEffect } from \"react\";\r\n\r\ninterface HourlyData {\r\n  time: string[];\r\n  temperature: number[];\r\n  weatherCode: number[];\r\n}\r\n\r\ninterface DailyData {\r\n  time: string[];\r\n  temperatureMax: number[];\r\n  temperatureMin: number[];\r\n  weatherCode: number[];\r\n}\r\n\r\ninterface WeatherData {\r\n  temperature: number;\r\n  humidity: number;\r\n  windSpeed: number;\r\n  feelsLike: number;\r\n  chanceOfRain: number;\r\n  weatherCode: number;\r\n  isDay: boolean;\r\n  hourly: HourlyData;\r\n  daily: DailyData;\r\n}\r\n\r\nexport function useWeather(lat: number | null, lon: number | null) {\r\n  const [data, setData] = useState<WeatherData | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState<boolean>(false);\r\n\r\n  useEffect(() => {\r\n    if (lat === null || lon === null) return;\r\n\r\n    const fetchWeather = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const response = await fetch(\r\n          `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,rain,weather_code,wind_speed_10m,is_day&hourly=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min&forecast_days=7`,\r\n        );\r\n        if (!response.ok) {\r\n          throw new Error(\"Failed to fetch weather data\");\r\n        }\r\n        const result = await response.json();\r\n\r\n        setData({\r\n          temperature: Math.round(result.current.temperature_2m),\r\n          humidity: result.current.relative_humidity_2m,\r\n          windSpeed: result.current.wind_speed_10m,\r\n          feelsLike: Math.round(result.current.apparent_temperature),\r\n          chanceOfRain: result.current.precipitation,\r\n          weatherCode: result.current.weather_code,\r\n          isDay: result.current.is_day === 1,\r\n          hourly: {\r\n            time: result.hourly.time,\r\n            temperature: result.hourly.temperature_2m.map((t: number) =>\r\n              Math.round(t),\r\n            ),\r\n            weatherCode: result.hourly.weather_code,\r\n          },\r\n          daily: {\r\n            time: result.daily.time,\r\n            temperatureMax: result.daily.temperature_2m_max.map((t: number) =>\r\n              Math.round(t),\r\n            ),\r\n            temperatureMin: result.daily.temperature_2m_min.map((t: number) =>\r\n              Math.round(t),\r\n            ),\r\n            weatherCode: result.daily.weather_code,\r\n          },\r\n        });\r\n      } catch (err: any) {\r\n        setError(err.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchWeather();\r\n  }, [lat, lon]);\r\n\r\n  return { data, error, isLoading };\r\n}\r\n",
      "type": "registry:hook"
    }
  ]
}